<!DOCTYPE html>
<html>

<head>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<style>
    body {
        background-color: #eceff1;
        font-size: 10px
    }

    .float-right {
        float: right;
    }

    .logo {
        max-width: 190px;
    }

    .nav-wrapper {
        padding: 0px 15px;
    }

    .card .card-title {
        font-size: 20px;
    }

    .font-weight-600 {
        font-weight: 600;
    }

    .card .card-content .card-title {
        line-height: 20px;
    }
</style>
<script>
    //global object fir ajax requests.
    const xhttp = new XMLHttpRequest();

    function showPage(e, breadcrumbText) {
        let id = e.id;
        id.includes("home_page") ? homePage("home_page", id + "_breadcrumb") : alertsPage(breadcrumbText)
    }

    function homePage(pageId, breadcrumId) {
        document.getElementById("home_page").style.display = "block";
        document.getElementById("alerts_page").style.display = "none";
        document.getElementById("alerts_breadcrumbs").style.visibility = "hidden";
    }

    function alertsPage(breadcrumbText) {
        document.getElementById("alerts_breadcrumbs").innerText = breadcrumbText;
        document.getElementById("home_page").style.display = "none";
        document.getElementById("alerts_page").style.display = "block";
        document.getElementById("alerts_breadcrumbs").style.visibility = "visible";
    }

    async function login() {
        let url = "https://icomox.poc.icomoxlive.net/auth/realms/icomox/protocol/openid-connect/token";
        let formBody = [];
        let details = {
            'grant_type': 'password',
            'client_id': 'login-app',
            'username': 'shiratech',
            'password': 'shiratech'
        };

        for (var property in details) {
            var encodedKey = encodeURIComponent(property);
            var encodedValue = encodeURIComponent(details[property]);
            formBody.push(encodedKey + "=" + encodedValue);
        }

        formBody = formBody.join("&");

        fetch(url, {
                method: 'POST',
                mode: 'no-cors',
                credentials: 'same-origin',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                    'Access-Control-Allow-Origin': '*',
                    'Access-Control-Allow-Methods': 'GET,PUT,POST,DELETE,PATCH,OPTIONS',
                    'Access-Control-Allow-Headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization',
                },
                body: formBody
            })
            .then(response => console.log(response))
    }

    function test() {
        let formBody = [];
        let details = {
            'grant_type': 'password',
            'client_id': 'login-app',
            'username': 'shiratech',
            'password': 'shiratech'
        };

        for (var property in details) {
            var encodedKey = encodeURIComponent(property);
            var encodedValue = encodeURIComponent(details[property]);
            formBody.push(encodedKey + "=" + encodedValue);
        }

        formBody = formBody.join("&");

        $.ajax({
                type: "POST",
                url: "https://icomox.poc.icomoxlive.net/auth/realms/icomox/protocol/openid-connect/token",
                data: formBody,
                contentType: "application/x-www-form-urlencoded",
                headers: {
                    'Access-Control-Allow-Origin': '*',
                    'Access-Control-Allow-Methods': 'GET,PUT,POST,DELETE,PATCH,OPTIONS',
                    'Access-Control-Allow-Headers': 'Origin, X-Requested-With, Content-Type, Accept, Authorization',
                },
                dataType: "json",
                async: true,
            })
            .done(function () {
                alert("success");

            })
            .fail(function () {
                alert("Failed");
            })
    }
</script>

<body>
    <div class="containet">
        <div>
            <img class="logo" src="https://www.hitprojectscenter.com/matak/request/images/Shiratech_Logo_Pos_Hor.png">
        </div>
        <nav>
            <div class="nav-wrapper blue-grey lighten-1">
                <div class="col s12" id="breadcrumb_list">
                    <span class="breadcrumb" id="home_page_breadcrumb" onclick="test()">Home</span>
                    <span class="breadcrumb" id="alerts_breadcrumbs" style="visibility: hidden;"></span>
                </div>
            </div>
        </nav>
    </div>
    <div calss="container" style="margin-top:20px" id="home_page">
        <div class="row" onclick="showPage(this, 'High Level Alerts')" id="high_level_alerts">
            <div class="col s12 m6">
                <div class="card red lighten-2">
                    <div class="card-content white-text">
                        <div class="row">
                            <div class="col">
                                <i class="small material-icons">keyboard_arrow_right</i>
                            </div>
                            <div class="col">
                                <span class="card-title" style="font-weight: 600; font-size:22px">7 Assets</span>
                                <span class="card-title">High level alert</span>
                            </div>
                            <div class="col">
                                <i class="small material-icons">keyboard_arrow_right</i>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="row" onclick="showPage(this, 'Medium Level Alerts')" id="medium_level_alerts">
            <div class="col s12 m6">
                <div class="card amber accent-2">
                    <div class="card-content white-text">
                        <span class="card-title" style="font-weight: 600; font-size:22px">3 Assets
                            <i class="small material-icons float-right">warning</i>
                        </span>
                        <span class="card-title">Medium level alerts</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="row" onclick="showPage(this, 'Normal Operation')" id="normal_operation">
            <div class="col s12 m6">
                <div class="card green lighten-2">
                    <div class="card-content white-text">
                        <span class="card-title" style="font-weight: 600; font-size:22px">5 Assets
                            <i class="small material-icons float-right">check_circle</i>
                        </span>
                        <span class="card-title">Normal Operation</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container" id="alerts_page" style="display: none;">
        <table class="device-table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Asset</th>
                    <th>Type</th>
                    <th>i</th>
                </tr>
            </thead>
            <tbody class="device-tableBody">
                <tr>
                    <td>Name</td>
                    <td>Item Name</td>
                    <td>Item Price</td>
                </tr>
            </tbody>
        </table>
    </div>
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
</body>

</html>